<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ ‡§ï‡§≤‡•ç‡§™‡§¶‡•ç‡§∞‡•Ç‡§Æ</title>
    <script src="filelist.js"></script>
    <style>
        /* --- GLOBAL STYLES --- */
        body {
            margin: 0; padding: 0;
            font-family: 'Segoe UI', Roboto, sans-serif;
            background: url('bg.png') no-repeat center center fixed; 
            background-size: cover;
            height: 100vh;
            color: white;
            overflow: hidden;
        }
        .glass {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }

        /* --- LOGIN SCREEN --- */
        #login-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 100;
        }
        .login-card {
            border-radius: 25px; padding: 30px; width: 85%; max-width: 350px; text-align: center;
        }
        .shlok {
            font-size: 14px; font-style: italic; margin-bottom: 20px;
            background: rgba(0,0,0,0.3); padding: 10px; border-radius: 10px;
        }
        input {
            width: 100%; padding: 12px; margin: 10px 0; border-radius: 30px; border: none;
            text-align: center; font-size: 18px;
        }
        button.main-btn {
            width: 100%; padding: 12px; margin-top: 10px; border-radius: 30px; border: none;
            background: white; color: black; font-weight: bold; font-size: 18px;
        }
        .footer-adx {
            position: absolute; bottom: 20px; font-weight: bold; letter-spacing: 2px; opacity: 0.8;
        }

        /* --- LIBRARY GRID --- */
        #library-screen {
            display: none; width: 100%; height: 100%; padding: 20px; box-sizing: border-box; overflow-y: auto;
        }
        .grid-container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding-bottom: 50px;
        }
        .book-card {
            border-radius: 15px; padding: 10px; text-align: center; position: relative;
        }
        .book-thumb {
            width: 100%; height: 140px; object-fit: cover; border-radius: 10px; margin-bottom: 8px; background: rgba(0,0,0,0.3);
        }
        .book-title {
            font-size: 15px; font-weight: bold; text-shadow: 0 1px 2px black;
        }

        /* --- READER SCREEN --- */
        #reader-screen {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 200;
        }
        .nav-bar {
            height: 50px; background: #222; color: white; display: flex; align-items: center; justify-content: space-between; padding: 0 15px;
        }
        .nav-icon { font-size: 24px; padding: 5px; cursor: pointer; }
        iframe { width: 100%; height: calc(100% - 50px); border: none; }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-card glass">
            <h2>‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ ‡§ï‡§≤‡•ç‡§™‡§¶‡•ç‡§∞‡•Ç‡§Æ</h2>
            <div class="shlok">
                ‡§∂‡•ç‡§∞‡•Ä‡§ï‡•É‡§∑‡•ç‡§£‡§∞‡§æ‡§µ‡•ã ‡§Æ‡•ç‡§π‡§£‡•á ‡§â‡§¶‡•ç‡§ß‡§µ‡§¶‡•á‡§µ‡§æ : ‡§π‡§æ ‡§ú‡•ç‡§û‡§æ‡§®‡§∞‡§§‡•ç‡§®‡§æ‡§ö‡§æ ‡§†‡•á‡§µ‡§æ :<br>
                ‡§≠‡§≤‡•á‡§§‡§Ø‡§æ ‡§π‡§æ‡§§‡•Ä‡§Ç ‡§®‡•á‡§¶‡§æ‡§µ‡§æ : ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•á‡§Ç‡§µ‡•Ä‡§£ ‡•§‡•§<br><br>
                ‡§π‡•á ‡§ú‡•ç‡§û‡§æ‡§®‡§∏‡•Å‡§ß‡§æ ‡§ó‡•ã‡§Æ‡§ü‡•Ä : ‡§ú‡•á ‡§™‡§æ‡§® ‡§ï‡§∞‡•Ä‡§§‡§ø ‡§ï‡§∞‡•ç‡§£‡§™‡•Å‡§ü‡•Ä‡§Ç :<br>
                ‡§§‡§Ø‡§æ‡§Ç ‡§ï‡§π‡§ø‡§Ç ‡§®‡§æ‡§π‡§ø‡§Ç ‡§ï‡§æ‡§Æ‡§æ‡§†‡•Ä : ‡§ú‡§®‡•ç‡§Æ‡§Æ‡§∞‡§£‡§æ‡§ö‡•Ä ‡•§‡•§
            </div>
            <input type="tel" id="pinInput" placeholder="PIN" maxlength="8">
            <button class="main-btn" onclick="checkPin()">LOGIN</button>
        </div>
        <div class="footer-adx">ADX</div>
    </div>

    <div id="library-screen">
        <h2 style="text-align:center;">‡§ó‡•ç‡§∞‡§Ç‡§•‡§æ‡§≤‡§Ø</h2>
        <div class="grid-container" id="grid-box"></div>
    </div>

    <div id="reader-screen">
        <div class="nav-bar">
            <div class="nav-icon" onclick="closeBook()">&#10094;</div> <span id="reading-title">‡§µ‡§æ‡§ö‡§®</span>
            <div class="nav-icon" onclick="closeBook()">&#127968;</div> </div>
        <iframe id="book-frame"></iframe>
    </div>

    <script>
        function checkPin() {
            if (document.getElementById("pinInput").value === "92252320") {
                document.getElementById("login-screen").style.display = "none";
                document.getElementById("library-screen").style.display = "block";
                loadLibrary();
            } else { alert("‡§ö‡•Å‡§ï‡•Ä‡§ö‡§æ ‡§™‡§ø‡§®!"); }
        }

        function loadLibrary() {
            var container = document.getElementById("grid-box");
            container.innerHTML = "";

            // ‡§ú‡§∞ filelist.js ‡§≤‡•ã‡§° ‡§ù‡§æ‡§≤‡•á ‡§®‡§∏‡•á‡§≤ (Error Prevention)
            if (typeof autoBookList === 'undefined' || autoBookList.length === 0) {
                container.innerHTML = "<p>‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡•á ‡§∏‡§æ‡§™‡§°‡§≤‡•Ä ‡§®‡§æ‡§π‡•Ä‡§§.</p>";
                return;
            }

            autoBookList.forEach(function(book) {
                var card = document.createElement("div");
                card.className = "book-card glass";
                
                // ‡§°‡§ø‡§´‡•â‡§≤‡•ç‡§ü ‡§á‡§Æ‡•á‡§ú (‡§ú‡§∞ ‡§á‡§Æ‡•á‡§ú ‡§®‡§∏‡•á‡§≤ ‡§§‡§∞)
                var imgSrc = book.image ? book.image : ""; 
                var imgTag = imgSrc ? `<img src="${imgSrc}" class="book-thumb">` : `<div class="book-thumb" style="display:flex;align-items:center;justify-content:center;font-size:40px;">üìñ</div>`;

                // ‡§®‡§æ‡§µ‡§æ‡§§‡•Ç‡§® "_" ‡§ï‡§æ‡§¢‡•Ç‡§® ‡§∏‡•ç‡§™‡•á‡§∏ ‡§¶‡•á‡§£‡•á
                var cleanTitle = book.name.replace(/_/g, " ");

                card.innerHTML = imgTag + `<div class="book-title">${cleanTitle}</div>`;
                
                card.onclick = function() {
                    openBook(book.file, cleanTitle);
                };
                container.appendChild(card);
            });
        }

        function openBook(url, title) {
            document.getElementById("library-screen").style.display = "none";
            document.getElementById("reader-screen").style.display = "block";
            document.getElementById("reading-title").innerText = title;
            document.getElementById("book-frame").src = url;
        }

        function closeBook() {
            document.getElementById("reader-screen").style.display = "none";
            document.getElementById("library-screen").style.display = "block";
            document.getElementById("book-frame").src = "";
        }
    </script>
</body>
</html>
