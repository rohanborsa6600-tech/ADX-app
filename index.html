<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>рдмреНрд░рд╣реНрдорд╡рд┐рджреНрдпрд╛</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="cordova.js"></script>
    <script src="filelist.js"></script>

    <style>
        /* --- CRYSTAL CLEAR LIQUID UI --- */
        :root { --neon: #00f3ff; --gold: #ffd700; --glass: rgba(255, 255, 255, 0.05); --border: rgba(255, 255, 255, 0.15); }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #000; color: white; overflow: hidden; user-select: none; }
        .bg-anim { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(45deg, #000000, #1a0b2e, #0f1c2e); background-size: 400% 400%; animation: bgMove 15s infinite; z-index: -1; }
        @keyframes bgMove { 0% {background-position:0% 50%} 50% {background-position:100% 50%} 100% {background-position:0% 50%} }
        .screen { display: none; position: absolute; width: 100%; height: 100%; flex-direction: column; }
        .active { display: flex; }
        /* Login */
        #login-screen { justify-content: center; align-items: center; background: url('login_bg.png') center/cover; }
        .crystal-card { background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.3); border-radius: 20px; padding: 30px; width: 80%; max-width: 350px; text-align: center; box-shadow: 0 0 20px rgba(0,0,0,0.5), inset 0 0 10px rgba(255,255,255,0.1); }
        input { width: 90%; padding: 12px; margin: 10px 0; background: rgba(0,0,0,0.6); border: 1px solid #555; border-radius: 10px; color: white; text-align: center; font-size: 16px; }
        .btn-liquid { width: 100%; padding: 12px; margin-top: 15px; background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(255,255,255,0.05)); border: 1px solid rgba(255,255,255,0.4); border-radius: 10px; color: var(--gold); font-weight: bold; box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: 0.3s; }
        .btn-liquid:active { transform: scale(0.95); box-shadow: 0 0 20px var(--gold); }
        /* Home */
        .header { padding: 40px 20px 20px; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.2); backdrop-filter: blur(10px); }
        .user-name-style { font-size: 24px; font-weight: bold; background: linear-gradient(to right, #fff, var(--gold)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 0 0 10px rgba(255,215,0,0.3); }
        .cat-bar { display: flex; overflow-x: auto; padding: 10px; gap: 10px; }
        .cat-chip { padding: 5px 15px; background: rgba(255,255,255,0.1); border-radius: 20px; font-size: 12px; white-space: nowrap; border: 1px solid transparent; }
        .cat-chip.sel { border-color: var(--neon); color: var(--neon); background: rgba(0, 243, 255, 0.1); }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; overflow-y: auto; padding-bottom: 100px; }
        .book-card { background: rgba(255,255,255,0.05); border-radius: 15px; position: relative; height: 230px; border: 1px solid rgba(255,255,255,0.1); overflow: hidden; transition: 0.3s; }
        .book-cover { width: 100%; height: 80%; object-fit: cover; opacity: 0.9; }
        .progress-line { height: 4px; background: #333; width: 100%; position: absolute; bottom: 35px; }
        .progress-fill { height: 100%; background: #0f0; width: 0%; box-shadow: 0 0 5px #0f0; }
        .pin-icon { position: absolute; top: 5px; right: 5px; font-size: 18px; filter: drop-shadow(0 0 5px black); }
        /* Reader & Modals */
        #reader-screen { background: white; z-index: 100; }
        .search-overlay { position: absolute; bottom: 0; width: 100%; padding: 10px; background: #222; display: none; gap: 10px; justify-content: center; }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 200; display: none; flex-direction: column; }
        .modal-content { padding: 20px; overflow-y: auto; height: 100%; }
        /* About Text */
        .about-text p { margin-bottom: 15px; line-height: 1.7; color: #ddd; text-align: justify; font-size: 15px; }
        .gold-txt { color: var(--gold); font-weight: bold; text-shadow: 0 0 5px rgba(255, 215, 0, 0.3); }
        .cyan-txt { color: var(--neon); font-weight: bold; text-shadow: 0 0 5px rgba(0, 243, 255, 0.3); }
        .quote-box { background: rgba(255,215,0,0.05); padding: 15px; border-left: 3px solid var(--gold); margin: 20px 0; font-style: italic; color: var(--gold); }
    </style>
</head>
<body>
    <div class="bg-anim"></div>
    <div id="login-screen" class="screen active">
        <div class="crystal-card">
            <h2 class="user-name-style">рдмреНрд░рд╣реНрдорд╡рд┐рджреНрдпрд╛</h2>
            <p style="color:#aaa; font-size:12px;">Since 2 Jan 2026</p>
            <div style="font-style:italic; font-size:12px; margin:15px 0; color:#ddd;">"рд╢реНрд░реАрдХреГрд╖реНрдгрд░рд╛рд╡реЛ рдореНрд╣рдгреЗ рдЙрджреНрдзрд╡рджреЗрд╡рд╛ : рд╣рд╛ рдЬреНрдЮрд╛рдирд░рддреНрдирд╛рдЪрд╛ рдареЗрд╡рд╛ :<br>рднрд▓реЗрддрдпрд╛ рд╣рд╛рддреАрдВ рдиреЗрджрд╛рд╡рд╛ : рдЕрдзрд┐рдХрд╛рд░реЗрдВрд╡реАрдг редред"</div>
            <input type="text" id="u_name" placeholder="рддреБрдордЪреЗ рдирд╛рд╡ (Name)">
            <input type="tel" id="u_pin" placeholder="PIN" maxlength="6">
            <button class="btn-liquid" id="login-btn" onclick="doLogin()">рдкреНрд░рд╡реЗрд╢ рдХрд░рд╛</button>
        </div>
    </div>
    <div id="home-screen" class="screen">
        <div class="header">
            <div class="user-name-style" id="disp-name">User</div>
            <div style="display:flex; gap:15px;"><span onclick="openSettings()" style="font-size:20px;">тЪЩя╕П</span></div>
        </div>
        <div class="cat-bar" id="cat-container"><div class="cat-chip sel" onclick="filterCat('All')">All</div><div class="cat-chip" onclick="filterCat('Pinned')">ЁЯУМ Pinned</div></div>
        <div id="waiting" style="display:none; text-align:center; margin-top:50px; padding:20px;"><p style="color:var(--gold); font-style:italic; font-size:18px;">"WAIT FOR ADMIN APPROVAL..."</p></div>
        <div class="grid" id="book-grid"></div>
    </div>
    <div id="reader-screen" class="screen"><div style="height:50px; background:#111; display:flex; align-items:center; justify-content:space-between; padding:0 15px;"><span onclick="closeReader()" style="color:white; font-size:24px;">тЖР</span><span id="reader-title" style="color:white; font-size:14px;">Book</span><div style="display:flex; gap:15px;"><span onclick="changeFont(1)" style="font-size:18px;">A+</span><span onclick="changeFont(-1)" style="font-size:14px;">A-</span><span onclick="toggleSearch()" style="font-size:18px;">ЁЯФН</span></div></div><iframe id="book-frame" style="width:100%; height:calc(100% - 100px); border:none; background:white;"></iframe><div id="search-box" class="search-overlay"><input type="text" id="search-txt" placeholder="Search..." style="width:60%;"><button onclick="doSearch()" style="padding:5px 15px;">Go</button></div></div>
    <div id="modal-box" class="modal"><div class="modal-content" id="modal-body"></div><button onclick="document.getElementById('modal-box').style.display='none'" style="padding:15px; background:#333; color:white; border:none; width:100%;">Close</button></div>

    <script>
        const firebaseConfig = { databaseURL: "https://adx-bk-default-rtdb.asia-southeast1.firebasedatabase.app" };
        let db; let did; let deviceUuid = "unknown";
        document.addEventListener('deviceready', function() {
            try { firebase.initializeApp(firebaseConfig); db = firebase.database(); } catch(e){}
            deviceUuid = device.uuid;
            let savedName = localStorage.getItem('u_name');
            if(savedName) { document.getElementById('u_name').value = savedName; document.getElementById('u_pin').value = "922523"; doLogin(); }
        }, false);
        let pinned = JSON.parse(localStorage.getItem('pins')) || []; let currentFilter = 'All';

        function doLogin() {
            let n = document.getElementById('u_name').value.trim(); let p = document.getElementById('u_pin').value;
            if(!n) return alert("рдХреГрдкрдпрд╛ рдирд╛рд╡ рдЯрд╛рдХрд╛."); if(p !== "922523") return alert("рдЪреБрдХреАрдЪрд╛ рдкрд┐рди!");
            let safeId = "U_" + n.replace(/[.#$[\]]/g, '_');
            document.getElementById('login-btn').innerText = "рддрдкрд╛рд╕рдд рдЖрд╣реЗ..."; document.getElementById('login-btn').disabled = true;
            db.ref('users/' + safeId).once('value', snapshot => {
                let userData = snapshot.val();
                if (userData && userData.deviceId && userData.deviceId !== deviceUuid) {
                    alert("тЪая╕П рдкреНрд░рд╡реЗрд╢ рдирд╛рдХрд╛рд░рд▓рд╛!\n\nрд╣реЗ рдЦрд╛рддреЗ рдЖрдзреАрдЪ рджреБрд╕рд▒реНрдпрд╛ рдореЛрдмрд╛рдИрд▓рд╡рд░ рдиреЛрдВрджрдгреАрдХреГрдд рдЖрд╣реЗ.\n\nрд╕реБрд░рдХреНрд╖реЗрдЪреНрдпрд╛ рдХрд╛рд░рдгрд╛рд╕реНрддрд╡ рдПрдХрд╛ рд╡реЗрд│реА рдлрдХреНрдд рдПрдХрд╛рдЪ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╡рд░ ре▓рдк рд╡рд╛рдкрд░рддрд╛ рдпреЗрддреЗ.");
                    document.getElementById('login-btn').innerText = "рдкреНрд░рд╡реЗрд╢ рдХрд░рд╛"; document.getElementById('login-btn').disabled = false; localStorage.clear();
                } else { proceedToHome(n, safeId); }
            });
        }
        function proceedToHome(name, safeId) {
            let inst = localStorage.getItem('inst_date'); if(!inst) { inst = Date.now(); localStorage.setItem('inst_date', inst); }
            if((Date.now() - inst) > (30*24*60*60*1000)) return alert("Validity Expired!");
            did = safeId; localStorage.setItem('u_name', name); localStorage.setItem('did', did);
            document.getElementById('disp-name').innerText = name; document.getElementById('login-screen').classList.remove('active'); document.getElementById('home-screen').classList.add('active');
            if(navigator.onLine) {
                db.ref('users/' + did).update({ name: name, deviceId: deviceUuid, deviceModel: device.model, isOnline: true, last_login: Date.now() });
                db.ref('users/' + did + '/access').on('value', snap => { renderBooks(snap.val() || {}); });
                db.ref('users/' + did + '/isBlocked').on('value', snap => { if(snap.val() === true) { alert("Your account has been suspended by Admin."); location.reload(); } });
                db.ref('users/' + did + '/isOnline').onDisconnect().set(false);
            } else { renderBooks(JSON.parse(localStorage.getItem('cached_access')) || {}); }
        }
        function renderBooks(access) {
            localStorage.setItem('cached_access', JSON.stringify(access)); let grid = document.getElementById('book-grid'); grid.innerHTML = ""; let count = 0;
            if(typeof autoBookList !== 'undefined') {
                let sorted = autoBookList.sort((a,b) => (pinned.includes(b.name)?1:0) - (pinned.includes(a.name)?1:0));
                sorted.forEach(b => {
                    if(access[b.name]) {
                        if(currentFilter === 'Pinned' && !pinned.includes(b.name)) return;
                        count++; let progress = localStorage.getItem('prog_' + b.name) || 0; let isPin = pinned.includes(b.name) ? 'ЁЯУМ' : '';
                        grid.innerHTML += `<div class="book-card" onclick="openBook('${b.file}', '${b.name}')" oncontextmenu="togglePin('${b.name}'); return false;"><img src="${b.image || 'cover.jpg'}" class="book-cover"><div class="pin-icon">${isPin}</div><div style="position:absolute; bottom:0; width:100%; height:40px; background:rgba(0,0,0,0.8); display:flex; flex-direction:column; justify-content:center; padding-left:10px;"><div style="font-size:12px;">${b.name}</div></div><div class="progress-line"><div class="progress-fill" style="width:${progress}%"></div></div></div>`;
                    }
                });
            }
            document.getElementById('waiting').style.display = (count===0) ? 'block' : 'none';
        }
        function togglePin(name) { if(pinned.includes(name)) pinned = pinned.filter(x => x!==name); else pinned.push(name); localStorage.setItem('pins', JSON.stringify(pinned)); location.reload(); }
        function filterCat(c) { currentFilter = c; location.reload(); }
        function openBook(file, name) { document.getElementById('home-screen').classList.remove('active'); document.getElementById('reader-screen').classList.add('active'); document.getElementById('reader-title').innerText = name; let fr = document.getElementById('book-frame'); fr.src = file; fr.onload = function() { let last = localStorage.getItem('scroll_' + name); if(last) fr.contentWindow.scrollTo(0, last); fr.contentWindow.onscroll = function() { let win = fr.contentWindow; let pct = Math.round((win.scrollY / (win.document.body.scrollHeight - win.innerHeight)) * 100); localStorage.setItem('scroll_' + name, win.scrollY); localStorage.setItem('prog_' + name, pct); if(Math.random() < 0.1 && navigator.onLine) db.ref('users/' + did + '/progress/' + name).set(pct); }; fr.contentDocument.body.addEventListener('keyup', (e) => { if(e.key=='PrintScreen') alert('Screenshots disabled'); }); }; }
        function closeReader() { document.getElementById('reader-screen').classList.remove('active'); document.getElementById('home-screen').classList.add('active'); document.getElementById('book-frame').src = ""; location.reload(); }
        function openSettings() { document.getElementById('modal-body').innerHTML = `<h2 style="color:var(--neon)">рд╕реЗрдЯрд┐рдВрдЧреНрдЬ</h2><div onclick="showAbout()" style="padding:15px; border-bottom:1px solid #333; cursor:pointer;">тД╣я╕П рдЖрдордЪреНрдпрд╛рдмрджреНрджрд▓ (About Us)</div><div onclick="showChat()" style="padding:15px; border-bottom:1px solid #333; cursor:pointer;">ЁЯТм рдлреАрдбрдмреЕрдХ (Feedback)</div><div style="padding:15px; color:#777; font-size:10px;">ID: ${did}<br>Device: ${deviceUuid}</div>`; document.getElementById('modal-box').style.display = 'flex'; }
        
        function showAbout() {
            let content = `
                <div class="about-text">
                    <h2 style="text-align:center; color:var(--gold); border-bottom:1px solid var(--border); padding-bottom:10px;">рее рд╢реНрд░реА рджрддреНрддрд╛рддреНрд░реЗрдп рдкреНрд░рднреВ рднрдЧрд╡рд╛рди рдХреА рдЬрдп рее</h2>
                    
                    <p>"рдЬреНрдпрд╛рдкреНрд░рдорд╛рдгреЗ рдЖрдХрд╛рд╢рд╛рдд рд╕реВрд░реНрдп рддрд│рдкрдд рдЕрд╕рддреЛ рдЖрдгрд┐ рддреНрдпрд╛рдЪреНрдпрд╛ рдкреНрд░рдХрд╛рд╢рд╛рдиреЗ рд╕рдВрдкреВрд░реНрдг рд╡рд┐рд╢реНрд╡ рдЙрдЬрд│реВрди рдирд┐рдШрддреЗ, рддреНрдпрд╛рдЪрдкреНрд░рдорд╛рдгреЗ рдЖрдкрд▓реНрдпрд╛ рд╕рд╛рдзрдХрд╛рдВрдЪреНрдпрд╛ рдЖрдпреБрд╖реНрдпрд╛рддреАрд▓ рдЕрдЬреНрдЮрд╛рдирд╛рдЪрд╛ рдЕрдВрдзрдХрд╛рд░ рджреВрд░ рдХрд░реВрди рддреНрдпрд╛рдВрдирд╛ 'рдмреНрд░рд╣реНрдорд╡рд┐рджреНрдпреЗрдЪрд╛' рд▓рдЦреНрдЦ рдкреНрд░рдХрд╛рд╢ рджреЗрдгрд╛рд░реЗ рд╕рд╛рдХреНрд╖рд╛рдд <span class="gold-txt">'рдкреНрд░рдЬреНрдЮрд╛рд╕реВрд░реНрдп' рдореНрд╣рдгрдЬреЗ рдк. рдкреВ. рдк. рдо. рд╢реНрд░реА рдореЛрдареЗ рдмрд╛рдмрд╛ рдЕрдВрдХреБрд│рдиреЗрд░рдХрд░</span> рд╣реЛрдд."</p>
                    <p>рдпрд╛ рд╡рд┐рд╢реНрд╡рд╛рдд рд╕реВрд░реНрдпрд╛рдЪреЗ рд╕реНрдерд╛рди рдЕрдврд│ рдЖрд╣реЗ, рд╕реВрд░реНрдп рдХрдзреАрд╣реА рдорд╛рд╡рд│рдд рдирд╛рд╣реА, рддреЛ рдлрдХреНрдд рдЖрдкрд▓реА рдЬрд╛рдЧрд╛ рдмрджрд▓рддреЛ. рдЕрдЧрджреА рддреНрдпрд╛рдЪрдкреНрд░рдорд╛рдгреЗ, рдк. рдкреВ. рд╢реНрд░реА рдореЛрдареЗрдмрд╛рдмрд╛рдВрдЪреЗ рдЕрд╕реНрддрд┐рддреНрд╡ рдЖрдгрд┐ рддреНрдпрд╛рдВрдЪреЗ рдХрд╛рд░реНрдп рдЖрдЬрд╣реА рдЕрдЦрдВрдб рдЖрдгрд┐ рдЕрд╡рд┐рд░рдд рд╕реБрд░реВ рдЖрд╣реЗ. рддреЗ рдЖрдЬрд╣реА рдЖрдкрд▓реНрдпрд╛ рд╢рд┐рд╖реНрдпрд╡реГрдВрджрд╛рдВрдЪреНрдпрд╛, рд╕рд╛рдзрдХрд╛рдВрдЪреНрдпрд╛ рдкрд╛рдареАрд╢реА рдЦрдВрдмреАрд░рдкрдгреЗ рдЙрднреЗ рдЖрд╣реЗрдд.</p>
                    <p>рд╢рд╛рд╕реНрддреНрд░рд╛рдВрдордзреНрдпреЗ 'рд╕рд░реНрд╡рд╡рд┐рджреН' (рд╕рд░реНрд╡ рдХрд╛рд╣реА рдЬрд╛рдгрдгрд╛рд░рд╛) рдЖрдгрд┐ 'рдмреНрд░рд╣реНрдордирд┐рд╖реНрда' (рдмреНрд░рд╣реНрдорд╛рд╢реА рдПрдХрд░реВрдк рдЭрд╛рд▓реЗрд▓рд╛) рдЕрд╢рд╛ рдорд╣рд╛рдкреБрд░реБрд╖рд╛рдВрдЪреЗ рд╡рд░реНрдгрди рдЖрдврд│рддреЗ. рд╢реНрд░реАрдореЛрдареЗрдмрд╛рдмрд╛ рд╣реЗ рдпрд╛ рд╡рд░реНрдгрдирд╛рдЪреЗ рдореВрд░реНрддрд┐рдордВрдд рдЖрдгрд┐ рдкреНрд░рддреНрдпрдХреНрд╖ рд░реВрдк рдЖрд╣реЗрдд. рдЧреАрддреЗрдд резрей рд╡реНрдпрд╛ рдЕрдзреНрдпрд╛рдпрд╛рдд 'рдЬреНрдЮрд╛рдирд┐рдпрд╛рдЪреА рд▓рдХреНрд╖рдгреЗ' рд╕рд╛рдВрдЧрд┐рддрд▓реА рдЖрд╣реЗрддтАФрдЬрд╕реЗ рдХреА рдЕрдорд╛рдирд┐рддреНрд╡, рдЕрджрдВрднрд┐рддреНрд╡, рдЕрдЪрд▓ рд╢рд╛рдВрддреА, рд╡реИрд░рд╛рдЧреНрдп, рдирд┐рд░рд╣рдВрдХрд╛рд░ рд╡реГрддреНрддреА рдЖрдгрд┐ рдХреЗрд╡рд│ рдИрд╢реНрд╡рд░рдкреНрд░рд╛рдкреНрддреАрдЪреА рддрд│рдорд│тАФрд╣реА рд╕рд░реНрд╡ рд▓рдХреНрд╖рдгреЗ рд╢реНрд░реАрдореЛрдареЗрдмрд╛рдмрд╛рдВрдЪреНрдпрд╛ рдард╛рдпреА рдЖрдЬрд╣реА рдЖрдкрд▓реНрдпрд╛рд▓рд╛ рдЕрдиреБрднрд╡рд╛рд╕ рдпреЗрддрд╛рдд.</p>
                    <p>рддреНрдпрд╛рдВрдЪреЗ рд╕рдВрдкреВрд░реНрдг рдЖрдпреБрд╖реНрдп рд╣реЗ 'рдмреНрд░рд╣реНрдорд╡рд┐рджреНрдпрд╛ рд╢рд╛рд╕реНрддреНрд░рд╛рдЪреНрдпрд╛' рдЪрд┐рдВрддрдирд╛рдд рдЖрдгрд┐ рдЖрдЪрд░рдгрд╛рдд рд╡реНрдпрддреАрдд рдЭрд╛рд▓реЗ рдЖрд╣реЗ. рд░рд╛рд╣реВрдирд╣реА рдХрдорд│рд╛рдЪреНрдпрд╛ рдкрд╛рдирд╛рдкреНрд░рдорд╛рдгреЗ рдЕрд▓рд┐рдкреНрдд рдИрд╢реНрд╡рд░рдкреНрд░рд╛рдкреНрддреАрд╕рд╛рдареА рдЖрдЪрд░рдг рдХрд╕реЗ рд╢реБрджреНрдз рдЖрдгрд┐ рдирд┐рд░реНрдорд│ рдЕрд╕рд╛рд╡реЗ рдпрд╛рдЪрд╛ рд╡рд╕реНрддреБрдкрд╛рда рддреЗ рдЖрдкрд▓реНрдпрд╛ рд╕рд╛рдзрдХрд╛рдВрдирд╛ рджреЗрдд рдЖрд╣реЗрдд. рд╢реНрд░реАрдореЛрдареЗрдмрд╛рдмрд╛ рд╣реЗ рдХреЗрд╡рд│ рдПрдХ рд╡реНрдпрдХреНрддреА рдирд╕реВрди рддреА рдПрдХ <span class="gold-txt">'рдЕрдЦрдВрдб рдЪреЗрддрдирд╛'</span> рдЖрд╣реЗ. рдЬрд╕рд╛ рд╕реВрд░реНрдп рд╕реНрд╡рддрдГ рдкреНрд░рдХрд╛рд╢реАрдд рд╣реЛрдКрди рдЬрдЧрд╛рд▓рд╛ рдкреНрд░рдХрд╛рд╢ рджреЗрддреЛ, рддрд╕реЗ рд╢реНрд░реАрдореЛрдареЗрдмрд╛рдмрд╛ рдЖрдкрд▓реНрдпрд╛ рддрдкрд╛рдЪреНрдпрд╛ рд╕рд╛рдорд░реНрдереНрдпрд╛рдиреЗ рд╕рд╛рдзрдХрд╛рдВрдЪреЗ рдЬреАрд╡рди рдЙрдЬреНрд╡рд▓ рдХрд░рдд рдЖрд╣реЗрдд. рддреНрдпрд╛рдВрдЪреЗ рдорд╛рд░реНрдЧрджрд░реНрд╢рди, рддреНрдпрд╛рдВрдЪреА рдкреНрд░рд╕рдиреНрдирддрд╛ рдЖрдгрд┐ рддреНрдпрд╛рдВрдЪрд╛ рдЖрд╢реАрд░реНрд╡рд╛рдж рдкреНрд░рддреНрдпреЗрдХ рд╢реНрд░рджреНрдзрд╛рд╡рд╛рди рд╕рд╛рдзрдХрд╛рд▓рд╛ рдХреНрд╖рдгрд╛рдХреНрд╖рдгрд╛рд▓рд╛ рдЬрд╛рдгрд╡рдд рдЕрд╕рддреЛ.</p>
                    <div class="quote-box">"рд╣реЗ ре▓рдк, рдЖрдгрд┐ рдЖрдордЪрд╛ рд╣рд╛ рдЫреЛрдЯрд╛рд╕рд╛ рдкреНрд░рдпрддреНрди, рддреНрдпрд╛ рдорд╣рд╛рддреЗрдЬрд╕реНрд╡реА 'рдкреНрд░рдЬреНрдЮрд╛рд╕реВрд░реНрдпрд╛'рдЪреНрдпрд╛ рдЪрд░рдгреА рдЕрддреНрдпрдВрдд рд╡рд┐рдирдореНрд░ рднрд╛рд╡рд╛рдиреЗ рд╕рдорд░реНрдкрд┐рдд рдЖрд╣реЗ."</div>

                    <h3 class="cyan-txt" style="text-align:center; margin-top:30px; border-top:1px solid var(--border); padding-top:20px;">рее рдмреНрд░рд╣реНрдорд╡рд┐рджреНрдпрд╛ - рд╕реНрд╡рд╛рдзреНрдпрд╛рдп рдЖрдгрд┐ рдЪрд┐рдВрддрди рее</h3>
                    <p>рдк. рдкреВ. рд╢реНрд░реА рдореЛрдареЗ рдмрд╛рдмрд╛рдВрдиреА рдЬреА 'рдмреНрд░рд╣реНрдорд╡рд┐рджреНрдпрд╛' (рдИрд╢реНрд╡рд░реА рдЬреНрдЮрд╛рди) рджрд┐рд▓реА рдЖрд╣реЗ, рддрд┐рдЪреЗ рд░рдХреНрд╖рдг рдХрд░рдгреЗ рдЖрдгрд┐ рдЕрдЦрдВрдб рдЪрд┐рдВрддрди рдХрд░рдгреЗ рд╣реЗ рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрдиреНрдпрд╛рд╕реА рд╕рд╛рдзрдХрд╛рдЪреЗ рдкрд░рдо рдХрд░реНрддрд╡реНрдп рдЖрд╣реЗ.</p>
                    <p>рд╕рдВрдиреНрдпрд╛рд╕ рдЖрд╢реНрд░рдорд╛рдд 'рд╕реНрд╡рд╛рдзреНрдпрд╛рдп' (рд╢рд╛рд╕реНрддреНрд░рд╛рдЪрд╛ рдЕрднреНрдпрд╛рд╕) рдЖрдгрд┐ 'рд╡рд┐рд╣рд╛рд░' (рднреНрд░рдордВрддреА) рдпрд╛рд▓рд╛ рдЕрддреНрдпрдВрдд рдорд╣рддреНрддреНрд╡ рдЖрд╣реЗ. рд╕рд╛рдзрдХ рдЬреЗрд╡реНрд╣рд╛ рд╡рд┐рд╣рд╛рд░рд╛рд╕рд╛рдареА рдХрд┐рдВрд╡рд╛ рдЪрд╛рддреБрд░реНрдорд╛рд╕рд╛рд╕рд╛рдареА рдмрд╛рд╣реЗрд░ рдЕрд╕рддрд╛рдд, рддреЗрд╡реНрд╣рд╛ рд╕реЛрдмрдд рдЕрдиреЗрдХ рдЧреНрд░рдВрде рдмрд╛рд│рдЧрдгреЗ рдкреНрд░рддреНрдпреЗрдХ рд╡реЗрд│реА рд╢рдХреНрдп рд╣реЛрдд рдирд╛рд╣реА. рдЧреНрд░рдВрдерд╛рдВрдЪреНрдпрд╛ рдЕрдиреБрдкрд▓рдмреНрдзрддреЗрдореБрд│реЗ рд╕рд╛рдзрдиреЗрдЪреНрдпрд╛ рдХрд┐рдВрд╡рд╛ рдЕрднреНрдпрд╛рд╕рд╛рдЪреНрдпрд╛ рдкреНрд░рд╡рд╛рд╣рд╛рдд рдЦрдВрдб рдкрдбреВ рдирдпреЗ, рдпрд╛рд╕рд╛рдареА рд╣реЗ <strong>'рдмреНрд░рд╣реНрдорд╡рд┐рджреНрдпрд╛ ре▓рдк'</strong> рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рдд рдЖрд▓реЗ рдЖрд╣реЗ.</p>
                    <p>рд╣реЗ ре▓рдк рдореНрд╣рдгрдЬреЗ рд╕рд╛рдзрдХрд╛рдВрд╕рд╛рдареА рдПрдХ <span class="cyan-txt">'рдлрд┐рд░рддреЗ рдЧреНрд░рдВрдерд╛рд▓рдп' (Digital Library)</span> рдЖрд╣реЗ.</p>
                    
                    <p><strong class="gold-txt">рдпрд╛ ре▓рдкрдЪрд╛ рдореБрдЦреНрдп рдЙрджреНрджреЗрд╢:</strong></p>
                    <ul style="list-style:none; padding:0;">
                        <li style="margin-bottom:10px; background:rgba(255,255,255,0.05); padding:10px; border-radius:10px;"><strong>рез. рдЕрдЦрдВрдб рд╕реНрд╡рд╛рдзреНрдпрд╛рдп:</strong> рд╕рд╛рдзрдХ рдХреЛрдгрддреНрдпрд╛рд╣реА рд╕реНрдерд╛рдиреА рдХрд┐рдВрд╡рд╛ рдкреНрд░рд╡рд╛рд╕рд╛рдд рдЕрд╕рд▓реЗ рддрд░реА, рддреНрдпрд╛рдВрдирд╛ рд╢рд╛рд╕реНрддреНрд░рд╛рдЪреЗ рд╡рд╛рдЪрди рдЖрдгрд┐ рдЪрд┐рдВрддрди рдЕрд╡рд┐рд░рдд рдХрд░рддрд╛ рдпрд╛рд╡реЗ.</li>
                        <li style="margin-bottom:10px; background:rgba(255,255,255,0.05); padding:10px; border-radius:10px;"><strong>реи. рджреБрд░реНрдорд┐рд│ рдЧреНрд░рдВрде рд░рдХреНрд╖рдг:</strong> рдкреНрд░рд╛рдЪреАрди рд╣рд╕реНрддрд▓рд┐рдЦрд┐рддреЗ рдЖрдгрд┐ рдЖрд╢реНрд░рдорд╛рддреАрд▓ рдорд╣рддреНрддреНрд╡рд╛рдЪреЗ рдЧреНрд░рдВрде рдбрд┐рдЬрд┐рдЯрд▓ рд╕реНрд╡рд░реВрдкрд╛рдд рд╕реБрд░рдХреНрд╖рд┐рдд рд░рд╛рд╣рд╛рд╡реЗрдд рдЖрдгрд┐ рдЕрднреНрдпрд╛рд╕реВ рд╕рд╛рдзрдХрд╛рдВрдирд╛ рддреЗ рд╕рд╣рдЬ рдЙрдкрд▓рдмреНрдз рд╡реНрд╣рд╛рд╡реЗрдд.</li>
                        <li style="margin-bottom:10px; background:rgba(255,255,255,0.05); padding:10px; border-radius:10px;"><strong>рей. рдмрд╛рдмрд╛рдВрдЪреЗ рд╡рд┐рдЪрд╛рд░:</strong> рдк. рдкреВ. рдореЛрдареЗ рдмрд╛рдмрд╛рдВрдЪреА рд╢рд┐рдХрд╡рдг рдЖрдгрд┐ 'рдмреНрд░рд╣реНрдорд╡рд┐рджреНрдпрд╛' рд╢рд╛рд╕реНрддреНрд░рд╛рдЪреЗ рдорд╛рд░реНрдЧрджрд░реНрд╢рди рд╕рд╛рдзрдХрд╛рдВрдирд╛ рдирд┐рддреНрдпрдирд┐рдпрдо рдкрд╛рд│рдгреНрдпрд╛рд╕рд╛рдареА рд╕рд╣рд╛рдпреНрдпрдХ рдард░рд╛рд╡реЗ.</li>
                    </ul>
                    <p><span class="gold-txt">рд╢реНрд░реА рджреЗрд╡рджрддреНрдд рдЖрд╢реНрд░рдо, рдЬрд╛рдзрд╡рд╡рд╛рдбреА</span> рд╣реЗ рдпрд╛ рдХрд╛рд░реНрдпрд╛рдЪреЗ рдореБрдЦреНрдп рдкреНрд░реЗрд░рдгрд╛рд╕реНрдерд╛рди рдЖрд╣реЗ. рд╢реНрд░реАрдореЛрдареЗрдмрд╛рдмрд╛рдВрдЪреНрдпрд╛ рддрдкрд╛рдиреЗ рдкреБрдиреАрдд рдЭрд╛рд▓реЗрд▓реА рд╣реА рднреВрдореА рдореНрд╣рдгрдЬреЗ рдмреНрд░рд╣реНрдорд╡рд┐рджреНрдпреЗрдЪреЗ рд╡рд┐рджреНрдпрд╛рдкреАрдардЪ рдЖрд╣реЗ. рдЗрдереВрдирдЪ рд╣рд╛ рдЬреНрдЮрд╛рдирд╛рдЪрд╛ рдкреНрд░рд╡рд╛рд╣ рдЖрддрд╛ рдЖрдзреБрдирд┐рдХ рддрдВрддреНрд░рдЬреНрдЮрд╛рдирд╛рдЪреНрдпрд╛ рд╕рд╛рд╣рд╛рдпреНрдпрд╛рдиреЗ рдкреНрд░рддреНрдпреЗрдХ рд╕рд╛рдзрдХрд╛рдкрд░реНрдпрдВрдд рдкреЛрд╣реЛрдЪрдд рдЖрд╣реЗ, рдЬреЗрдгреЗрдХрд░реВрди рддреНрдпрд╛рдВрдЪреА рдЬреНрдЮрд╛рдирд╕рд╛рдзрдирд╛ рдЕрдзрд┐рдХ рдкреНрд░рдЧрд▓реНрдн рд╣реЛрдИрд▓.</p>
                    <h3 style="text-align:center; color:var(--gold); margin-top:30px;">рее рд╢реНрд░реАрджрддреНрддрд╛рддреНрд░реЗрдпрдкреНрд░рднреВ рдорд╣рд╛рд░рд╛рдЬ рдХреА рдЬрдп рее</h3>
                </div>
            `;
            document.getElementById('modal-body').innerHTML = content;
        }

        function showChat() { document.getElementById('modal-body').innerHTML = `<h2 style="color:cyan">рдлреАрдбрдмреЕрдХ</h2><div id="chat-box" style="height:300px; overflow-y:auto; background:#222; margin-bottom:10px; padding:10px; border-radius:10px;"></div><div style="display:flex; gap:10px;"><input type="text" id="chat-in" placeholder="Message..." style="width:70%;"><button onclick="sendMsg()" style="padding:10px; background:cyan; border:none; border-radius:5px;">Send</button></div>`; loadMsgs(); }
        function sendMsg() { let txt = document.getElementById('chat-in').value; if(txt) { db.ref('feedback/' + did).push({sender:'user', text:txt, time:Date.now()}); document.getElementById('chat-in').value=''; } }
        function loadMsgs() { db.ref('feedback/' + did).on('child_added', s => { let m = s.val(); let b = document.getElementById('chat-box'); if(b) b.innerHTML += `<div style="text-align:${m.sender=='admin'?'left':'right'}; margin:5px;"><span style="background:${m.sender=='admin'?'#333':'#004444'}; padding:5px 10px; border-radius:10px;">${m.text}</span></div>`; }); }
        function changeFont(dir) { let b = document.getElementById('book-frame').contentDocument.body; b.style.fontSize = (parseFloat(window.getComputedStyle(b).fontSize) + dir*2) + "px"; }
        function toggleSearch() { let b=document.getElementById('search-box'); b.style.display=(b.style.display=='flex')?'none':'flex'; }
        function doSearch() { document.getElementById('book-frame').contentWindow.find(document.getElementById('search-txt').value); }
    </script>
</body>
</html>
